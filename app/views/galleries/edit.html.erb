<link href="/css/lightgallery.css" rel="stylesheet">

<link rel="stylesheet" href="/css/mobirise-icons/mobirise-icons.css">
<link rel="stylesheet" href="/css/style_mob.css">
<style>
  *{
    margin:0;
    padding: 0;
    box-sizing: border-box;
    font-family: Sans-Serif;
  }
  h1{
    font-weight: 800;
  }
  p{
    font-weight: 500;
  }
  .row{
    display: flex;
    flex-wrap: wrap;
    width: 100%;
  }
  .row .column{
    flex: 16.6%; /*three columns*/
    width: auto;
    overflow: hidden;
    padding: 0 4px;
    height: 100%;
  }
  .row .column img{
    margin-top: 2%;
    width: 100%;
    height: 100%;
    cursor: pointer;
  }

  @media only screen and (max-width: 800px) {
    .row .column {
      flex: 50%;
    }
  }
  @media only screen and (max-width: 600px){
    .row .column{
      flex: 100%;
    }
  }
</style>
<h1 class="text-center text-primary p-2">Gallery</h1>


<h2>edit New Gallery</h2>

<%= form_for @gallery do |f| %>

  <% if @gallery.errors.any? %>
    <% @gallery.errors.full_messages.each do |msg| %>
      <div class="alert alert-danger"><%= msg %></div>
    <% end %>
  <% end %>

  <div class="form-group">
    <%= f.label :name %>
    <%= f.text_field :name, class:'form-control' %>
    <%= f.file_field :images, multiple: true, as: :file %>
  </div>

  <br>
  <%= f.submit "Submit", class: 'btn btn-primary' %>
  <%= link_to "Cancel", galleries_path, class:'btn btn-default' %>





<% end %>

<h3 class="page-header">Images in <%= @gallery.name %></h3>
<div id="edit_images">
  <div class="row" id="lightgallery">
    <% if @gallery.images.present? %>

      <% @gallery.images.in_groups(5, false).each do |group| %>
        <div class="column">
          <% group.each do |image| %>
            <div class="item" data-src="<%= url_for(image.variant(resize_to_limit: [1000, 670])) %>">
            <a href='<%= image_tag image.variant(resize_to_limit: [1000, 670]) %>'>
              <%= image_tag image.variant(resize_to_limit: [1000, 670]) %>
            </a>
            <span class="icon-focus"></span>
            </div>

          <% end %>
          </div>
      <% end %>
    <% else %>
      <p>There are no images</p>
    <% end %>

    </div>

<script type="text/javascript">
    $(document).on('turbolinks:load', function(){
        $('#lightgallery').lightGallery({
            selector: '.item'
        });
    });
</script>


</div>